<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- TODO: Set the document title to the name of your application -->
    <title>LyneFlix - Filmes e Séries - HD</title>
    <meta name="description" content="LyneFlix — Entre no universo definitivo do entretenimento.
Filmes, séries e novidades atualizadas com qualidade, organização inteligente e player avançado. Tudo">
    <meta name="author" content="Lovable" />

    <!-- TODO: Update og:title to match your application name -->
    
    
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://pub-bb2e103a32db4e198524a2e9ed8f35b4.r2.dev/9a5a1b5a-e224-4486-8508-deee25ae09ed/id-preview-7f732f7c--65cc7520-3e00-43cf-96cf-86d1073de6e3.lovable.app-1771345491819.png">

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@Lovable" />
    <meta name="twitter:image" content="https://pub-bb2e103a32db4e198524a2e9ed8f35b4.r2.dev/9a5a1b5a-e224-4486-8508-deee25ae09ed/id-preview-7f732f7c--65cc7520-3e00-43cf-96cf-86d1073de6e3.lovable.app-1771345491819.png">
    
  
  
  
  
  
  
  
  <meta property="og:title" content="LyneFlix - Filmes e Séries - HD">
  <meta name="twitter:title" content="LyneFlix - Filmes e Séries - HD">
  <meta property="og:description" content="LyneFlix — Entre no universo definitivo do entretenimento.
Filmes, séries e novidades atualizadas com qualidade, organização inteligente e player avançado. Tudo">
  <meta name="twitter:description" content="LyneFlix — Entre no universo definitivo do entretenimento.
Filmes, séries e novidades atualizadas com qualidade, organização inteligente e player avançado. Tudo">
</head>

  <body>
    <script>
      // Ultimate Cache Nuke v3 — runs BEFORE React loads
      // Clears: Service Workers, CacheStorage, IndexedDB, localStorage (selective), sessionStorage, cookies (site-only)
      (function(){
        var K='lyneflix_cache_version';
        var F='lyneflix_nuke_done';
        if(sessionStorage.getItem(F)) return;
        var url='https://mfcnkltcdvitxczjwoer.supabase.co/rest/v1/site_settings?key=eq.cache_version&select=value';
        var xhr=new XMLHttpRequest();
        xhr.open('GET',url,true);
        xhr.timeout=5000;
        xhr.setRequestHeader('apikey','eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1mY25rbHRjZHZpdHhjemp3b2VyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzEyMzExOTgsImV4cCI6MjA4NjgwNzE5OH0.g8R1h217oI-y7zeBsvN7kfE9aPMlQZEEEbRCQLAEbXA');
        xhr.setRequestHeader('Cache-Control','no-cache, no-store');
        xhr.setRequestHeader('Pragma','no-cache');
        xhr.onload=function(){
          try{
            var rows=JSON.parse(xhr.responseText);
            if(!rows||!rows.length)return;
            var val=rows[0].value;
            var rv=typeof val==='object'&&val!==null&&'v' in val?val.v:val;
            rv=String(rv);
            var lv=localStorage.getItem(K);
            if(lv===rv)return;
            console.log('[CacheNuke] '+lv+' → '+rv+' | Full purge initiated');
            // 1. Save version FIRST to prevent loops
            localStorage.setItem(K,rv);
            sessionStorage.setItem(F,'1');
            // 2. Unregister ALL service workers
            if(navigator.serviceWorker){
              navigator.serviceWorker.getRegistrations().then(function(regs){
                return Promise.all(regs.map(function(r){return r.unregister()}));
              }).catch(function(){});
            }
            // 3. Nuke CacheStorage completely
            if(window.caches){
              caches.keys().then(function(names){
                return Promise.all(names.map(function(n){return caches.delete(n)}));
              }).catch(function(){});
            }
            // 4. Clear IndexedDB databases
            if(window.indexedDB&&indexedDB.databases){
              indexedDB.databases().then(function(dbs){
                dbs.forEach(function(db){if(db.name)indexedDB.deleteDatabase(db.name)});
              }).catch(function(){});
            }
            // 5. Clear sessionStorage (except our nuke flag)
            var nukeFlag=sessionStorage.getItem(F);
            sessionStorage.clear();
            if(nukeFlag)sessionStorage.setItem(F,nukeFlag);
            // 6. Selective localStorage clear (keep auth + profile + device_id)
            var keep=['lyneflix_cache_version','lyneflix_active_profile','sb-mfcnkltcdvitxczjwoer-auth-token','lyneflix_device_id'];
            var saved={};
            keep.forEach(function(k){var v=localStorage.getItem(k);if(v!==null)saved[k]=v});
            localStorage.clear();
            Object.keys(saved).forEach(function(k){localStorage.setItem(k,saved[k])});
            // 7. Expire all site cookies
            document.cookie.split(';').forEach(function(c){
              var name=c.split('=')[0].trim();
              if(name)document.cookie=name+'=;expires=Thu,01 Jan 1970 00:00:00 GMT;path=/';
            });
            // 8. Hard reload with cache bypass
            setTimeout(function(){
              if(location.href.indexOf('?')>-1){
                location.href=location.href.replace(/[?&]_cb=\d+/,'')+'&_cb='+Date.now();
              }else{
                location.href=location.href+'?_cb='+Date.now();
              }
            },400);
          }catch(e){console.warn('[CacheNuke]',e)}
        };
        xhr.onerror=function(){};
        xhr.ontimeout=function(){};
        xhr.send();
      })();
    </script>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
